install.packages("devtools")
library("devtools")
library("devtools")
find_rtools()
install.packages("KernSmooth")
clc
install.packages("caret")
1=2
library("xlsx")
dat<-read.xlsx("./data/2.xlsx",rowIndex=18:23,colIndex=7:15)
sum(dat$Zip*dat$Ext,na.rm=T)
dat<-read.xlsx("./data/2.xlsx",sheetIndex=1,rowIndex=18:23,colIndex=7:15)
sum(dat$Zip*dat$Ext,na.rm=T)
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FDATA.gov_NGAP.xlsx","./data/2.xlsx")
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FDATA.gov_NGAP.xlsx","./data/2.xlsx")
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FDATA.gov_NGAP.xlsx","./data/2.xlsx")
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FDATA.gov_NGAP.xlsx","./2.xlsx")
dat<-read.xlsx("./2.xlsx",sheetIndex=1,rowIndex=18:23,colIndex=7:15)
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FDATA.gov_NGAP.xlsx","./2.xlsx",mod="wb")
dat<-read.xlsx("./2.xlsx",sheetIndex=1,rowIndex=18:23,colIndex=7:15)
sum(dat$Zip*dat$Ext,na.rm=T)
library("XML")
install.packages("XML")
library("XML")
fileurl<-"https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
doc<-xmlTreeParse(fileurl,useInternal=TRUE)
rootnode<-xmlRoot(doc)
xmlName(rootnode)
fileurl<-"http://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
doc<-xmlTreeParse(fileurl,useInternal=TRUE)
rootnode<-xmlRoot(doc)
xmlName(rootnode)
xmlpathSApply(rootnode,"//zipcode",21231)
xmlPathSApply(rootnode,"//zipcode",21231)
?xmlInternalTreeParse
xmlName(rootnode[[1]])
xmlName(rootnode[[1]][[1]])
xmlName(rootnode)
xmlName(rootnode[[1]])
names(rootnode[[1]])
xmlName(rootnode[[1]])
xmlName(rootnode[[1]][[1]])
names(rootnode[[1]][[1]])
zipcode<-xpathSApply(rootNode, "//zipcode", xmlValue)
zipcode<-xpathSApply(rootnode, "//zipcode", xmlValue)
table(zipcode == 21231)
table(zipcode)
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv","./data/2.csv")
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv","./2.csv")
fread
fread("./2.csv")
library("data.table")
?fread
f<-fread("./2.csv")
DT<-fread("./2.csv")
?message
check <- function(y, t) {
message(sprintf("Elapsed time: %.10f", t[3]))
print(y)
}
system.time(y <- sapply(split(DT$pwgtp15, DT$SEX), mean))
y
system.time(sapply(split(DT$pwgtp15,DT$SEX),mean))
system.time(mean(DT[DT$SEX==1,]$pwgtp15); mean(DT[DT$SEX==2,]$pwgtp15))
getwd()
1>2
0.04>0.02
0.07<0.10
library(data.table)
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv"
download.file(fileUrl, destfile="./microdata3.csv")
DT <- fread("./microdata3.csv")
file.info("./microdata3.csv")$size
system.time(DT[,mean(pwgtp15),by=SEX])
system.time(mean(DT[DT$SEX==1,]$pwgtp15))+system.time(mean(DT[DT$SEX==2,]$pwgtp15))
system.time(sapply(split(DT$pwgtp15,DT$SEX),mean))
system.time(mean(DT$pwgtp15,by=DT$SEX))
system.time(tapply(DT$pwgtp15,DT$SEX,mean))
system.time(rowMeans(DT)[DT$SEX==1])+system.time(rowMeans(DT)[DT$SEX==2]
)
rm(list=ls())
?diag
View(DT)
setwd("D:/Data Science Certification/4")
power<-data.table(read.csv("cleaned.csv"))
library(data.table)
power<-data.table(read.csv("cleaned.csv"))
colnames(power)
lncol<-c('black','red','blue')
lbls<-c('Sub_metering_1','Sub_metering_2','Sub_metering_3')
plot(power$datatime,power$Submetering1,type='l',col=lncol[1],xlab='',ylab='Energy sub metering')
lines(power$datatime,power$Submetering2,col=lncol[2])
lines(power$datatime,power$Submetering3,col=lncol[3])
# add legend
legend('topright',legend=lbls,col=lncol,lty='solid')
source('~/.active-rstudio-document')
getwd()
source('~/.active-rstudio-document')
library(lubridate)
source('~/.active-rstudio-document')
plot(power.consumption$DateTime,power.consumption$GlobalActivePower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
View(power.consumption)
View(power)
source('D:/Data Science Certification/4/week1_cleaning.R')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
power
colnames(power)
plot(power$Datetime,power$Globalactivepower,ylab='Global Active Power (kilowatts)', xlab='', type='|')
plot(power.consumption$DateTime,power.consumption$GlobalActivePower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
plot(power$Datetime,power$Globalactivepower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
View(power)
View(power)
View(power)
View(power)
View(power.consumption)
View(power.consumption)
plot(power$Datetime,power$Globalactivepower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
plot(power.consumption$DateTime,power.consumption$GlobalActivePower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
source('~/.active-rstudio-document')
rm(list=ls())
setwd("D:/Data Science Certification/4")
source('D:/Data Science Certification/4/cleaning1.R')
source('D:/Data Science Certification/4/plot2.R')
colnames(power.consumption)
power.consumption<-data.table(read.table("power_consumption.txt",sep="|"))
colnames(power.consumption)
View(power.consumption)
View(power.consumption)
power.consumption<-data.table(read.table("power_consumption.txt",sep="|",header=TRUE))
colnames(power.consumption)
source('D:/Data Science Certification/4/plot2.R')
plot(power.consumption$DateTime,power.consumption$GlobalActivePower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
plot(power.consumption$DateTime,power.consumption$GlobalActivePower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
View(power.consumption)
View(power.consumption)
source('D:/Data Science Certification/4/cleaning1.R')
plot(power.consumption$DateTime,power.consumption$GlobalActivePower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
plot(power.consumption$DateTime,power.consumption$GlobalActivePower,ylab='Global Active Power (kilowatts)', xlab='', type='l')
source('D:/Data Science Certification/4/plot2.R')
source('D:/Data Science Certification/4/plot2.R')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
?lines
source('D:/Data Science Certification/4/plot3.R')
source('D:/Data Science Certification/4/plot4.R')
dmy("12/02/2006")
dmy("12/02/2006")-dmy("14/02/2006")
a<-dmy("12/02/2006")
am(a)
pm(a)
install.packages("lattice")
library(lattice)
library(datasets)
datasets
xyplot(Ozone~Wind,airquality)
f<-rep(0:1,each=50)
f
library(ggplot2)
str(mpg)
qplot(displ,hwy,data=mpg)
qplot(displ,hwy,data=mpg,color=drv)
qplot(displ,hwy,data=mpg,color=manufacturer)
qplot(displ,hwy,data=mpg,color=manufacturer,geom=c("point","smooth"))
qplot(displ,hwy,data=mpg,color=drv,geom=c("point","smooth"))
qplot(hwy,data=mpg,fill=drv)
qplot(displ,hwy,data=mpg,facets=.~drv)
str(maacs)
?qplot
?geom_smooth
?llines
?trellis.par.set
rm(list=ls())
library("swirl")
rep(1:3,each=4)
rnorm(12,mean=rep(1:3,each=4),sd=0.5)
rnorm(12,mean=rep(1:3,each=4),sd=0.2)
x<-rnorm(12,mean=rep(1:3,each=4),sd=0.2)
y<-rnorm(12,mean=rep(1,2,1,each=4),sd=0.2)
?par
x<-rnorm(12,mean=rep(1:3,each=4),sd=0.2)
y<-rnorm(12,mean=rep(c(1,2,1),each=4),sd=0.2)
dataframe<-data.frame(x=x,y=y)
dataframe
datamatrix<-as.matrix(dataframe)[sample(1:12),]
datamatrix
datamatrix<-as.matrix(dataframe)
datamatrix
[sample(1:12),]
sample(1:12)
datamatrix<-as.matrix(dataframe)[sample(1:12),]
kmeans(datamatrix,centers = 3)
k<-kmeans(datamatrix,centers = 3)
k$centers
par(mfrow=c(1,2),mar=rep(c(0),4))
heatmap(datamatrix)
set.seed(12345); par(mar=rep(0.2,4))
dataMatrix <- matrix(rnorm(400),nrow=40)
dataMatrix
image(1:10,1:40,t(dataMatrix)[,nrow(dataMatrix):1])
heatmap(dataMatrix)
?image
heatmap(dataMatrix)
?t
image(1:10,1:40,dataMatrix)
?image
image(1:10,1:40)
setwd("D:/Data Science Certification/datasciencecoursera/Reproducable Research/Week4")
source('~/.active-rstudio-document')
NEI
head(NEI)
class(NEI)
count(NEI[,year=1999])
length(NEI[,year=1999])
?sample
NEI_sampling <- NEI[sample(nrow(NEI), size=2000, replace=F), ]
NEI_sampling
class(NEI_sampling)
str(NEI_sampling)
unique(c('a','a'))
Emissions <- aggregate(NEI$Emissions, by=list(NEI$year), FUN=sum)
str(Emissions)
Emissions$PM <- round(Emissions[,2],2)
str(Emissions)
barplot(Emissions$x,Emissions$Group.1)
Emissions$PM<-Emissions$x/1000000
Emissions$PM
Emissions$PM<-round(Emissions$x/1000000,2)
Emissions$PM
barplot(Emissions$PM,Emissions$Group.1)
par(mar=c(2,2,2,2))
barplot(Emissions$PM,Emissions$Group.1)
barplot(Emissions$PM,Emissions$Group.1,main="Total emission of PM[2.5]")
barplot(Emissions$PM,Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
barplot(Emissions$PM,Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
source('~/.active-rstudio-document')
Emissions <- aggregate(NEI$Emissions, by=list(NEI$year), FUN=sum)
Emissions$PM<-round(Emissions$x/1000000,2)
par(mar=rep(0,4))
barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
par(mar=rep(4,4))
barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
Emissions$PM<-round(Emissions$x/1000000,2)
par(mar=rep(4,4))
barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
png("plot1.png")
par(mar=rep(4,4))
b<-barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
dev.off()
str(NEI)
NEI[fips="24510",]
NEI[,fips="24510"]
data<-subset(NEI,fips=="24510")
str(data)
Emissions <- aggregate(data$Emissions, by=list(data$year), FUN=sum)
Emissions$PM<-round(Emissions$x/1000000,2)
png("plot2.png")
par(mar=rep(4,4))
b<-barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
dev.off()
data<-subset(NEI,fips=="24510")
Emissions <- aggregate(data$Emissions, by=list(data$year), FUN=sum)
str(Emissions)
data<-subset(NEI,fips=="24510")
Emissions <- aggregate(data$Emissions, by=list(data$year), FUN=sum)
png("plot2.png")
par(mar=rep(4,4))
b<-barplot(Emissions$x,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of Baltimore city, MD",xlab="YEAR",ylab="PM 2.5 in tons")
dev.off()
str(NEI)
s<-subset(NEI,type=="POINT")
str(s)
SCC
source('~/.active-rstudio-document')
MD
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_curve()
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_line()
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_bar()
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_point()
+geom_boxplot(type)
+geom_boxplot(aes(type))
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_point()+geom_boxplot(aes(type))
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_point()+geom_boxplot(aes(type))
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_boxplot())
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_boxplot())
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_boxplot()
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_boxplot(aes(type))
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_boxplot(aes(fill=type))
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+guides(fill=F)+geom_boxplot(aes(fill=type))
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_point(aes(fill=type))
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+geom_boxplot(aes(fill=type))
ggtitle("Emission per type in Baltimore, MArylans")
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+
geom_boxplot(aes(fill=type))+xlab('YEAR')+ylab("Log of PM[2.5] emissions")+
ggtitle("Emission per type in Baltimore, MArylans")
MD <- subset(NEI, fips=="24510")
MD$year <- factor(MD$year, levels=c('1999', '2002', '2005', '2008'))
png("plot3.png")
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+
geom_boxplot(aes(fill=type))+xlab('YEAR')+ylab("Log of PM[2.5] emissions")+
ggtitle("Emission per type in Baltimore, MArylans")
dev.off()
png("plot3.png",width=1200,height=800,units="px")
ggplot(data=MD, aes(x=year,y=log(Emissions)))+facet_grid(.~type)+
geom_boxplot(aes(fill=type))+xlab('YEAR')+ylab("Log of PM[2.5] emissions")+
ggtitle("Emission per type in Baltimore, MArylans")
dev.off()
str(SCC)
SCC.coal = SCC[grepl("coal", SCC$Short.Name, ignore.case=TRUE),]
SCC.coal
str(SCC.coal)
head(SCC.coal$Short.Name)
merge <- merge(x=NEI, y=SCC.coal, by='SCC')
merge.sum <- aggregate(merge[, 'Emissions'], by=list(merge$year), sum)
merge.sum
merge.sum.round<-round(merge.sum[,2]/1000,2)
merge.sum.round
merge.sum$round<-round(merge.sum[,2]/1000,2)
qplot(merge.sum,aes("Group.1","round"))
qplot(Group.l,round,data=merge.sum)
merge.sum
qplot(Group.1,round,data=merge.sum)
qplot(Group.1,round,data=merge.sum)+geom_smooth(method="lm")
qplot(Group.1,round,data=merge.sum)+geom_smooth()
qplot(Group.1,round,data=merge.sum)+geom_smooth(col="red")
png("plot4.png",width=1200,height=800,units="px")
qplot(Group.1,round,data=merge.sum)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in kilotons")+ggtitle("Total emission of PM[2.5]")
dev.off()
png("plot1.png",width=1200,height=800,units="px")
par(mar=rep(4,4))
b<-barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
dev.off()
png("plot1.png")
par(mar=rep(4,4))
b<-barplot(Emissions$PM,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of PM[2.5]",xlab="YEAR",ylab="PM 2.5 in Megatons")
dev.off()
source('D:/Data Science Certification/datasciencecoursera/Reproducable Research/Week4/plot1.R')
unique(NEI[,"type"])
MD.onroad <- subset(NEI, fips == 24510 & type == 'ON-ROAD')
MD.df <- aggregate(MD.onroad[, 'Emissions'], by=list(MD.onroad$year), sum)
MD.df
MD.df$round<-round(MD.df[,2],2)
MD.df
source('~/.active-rstudio-document')
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
source('D:/Data Science Certification/datasciencecoursera/Reproducable Research/Week4/plot5.R')
str(NEI)
NEI$year<-factor(NEI$year,levels = c("1999","2002","2005","2008"))
MD.onroad <- subset(NEI, fips == '24510' & type == 'ON-ROAD')
CA.onroad <- subset(NEI, fips == '06037' & type == 'ON-ROAD')
MD.df<-aggregate(MD.onroad[, 'Emissions'], by=list(MD.onroad$year), sum)
CA.df<-aggregate(CA.onroad[, 'Emissions'], by=list(CA.onroad$year), sum)
MD.df
par(mfrow=c(1,2))
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
qplot(Group.1,round,data=CA.df)+geom_smooth(col="blue")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
p1<-qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
p2<-qplot(Group.1,round,data=CA.df)+geom_smooth(col="blue")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
multiplot(p1,p2,cols=2)
?multiplot
library(ggplot2)
multiplot(p1,p2,cols=2)
grid.arrange( p1, p2, ncol=2)
ggplot2.multiplot(p1,p2)
require(gridExtra)
grid.arrange(p1, p2, ncol=2)
multiplot <- function(..., plotlist=NULL, cols) {
require(grid)
# Make a list from the ... arguments and plotlist
plots <- c(list(...), plotlist)
numPlots = length(plots)
# Make the panel
plotCols = cols                          # Number of columns of plots
plotRows = ceiling(numPlots/plotCols) # Number of rows needed, calculated from # of cols
# Set up the page
grid.newpage()
pushViewport(viewport(layout = grid.layout(plotRows, plotCols)))
vplayout <- function(x, y)
viewport(layout.pos.row = x, layout.pos.col = y)
# Make each plot, in the correct location
for (i in 1:numPlots) {
curRow = ceiling(i/plotCols)
curCol = (i-1) %% plotCols + 1
print(plots[[i]], vp = vplayout(curRow, curCol ))
}
}
multiplot(p1,p2,cols=2)
rm(par(mfrow=c(1,2)))
multiplot(p1,p2)
install.packages("cowplot")
library(cowplot)
plot_grid(p1,p2,ncol=2,align = "v")
install.packages("gridExtra")
library(gridExtra)
grid.arrange(p1,p2,ncol=2)
p1<-qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
p1
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
MD.df<-aggregate(MD.onroad[, 'Emissions'], by=list(MD.onroad$year), sum)
CA.df<-aggregate(CA.onroad[, 'Emissions'], by=list(CA.onroad$year), sum)
MD.df
MD.df$round<-round(MD.df[,2],2)
CA.df$round<-round(CA.df[,2],2)
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
MD.df
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
source('~/.active-rstudio-document')
View(merge)
source('D:/Data Science Certification/datasciencecoursera/Reproducable Research/Week4/plot5.R')
rm(list=ls())
source('D:/Data Science Certification/datasciencecoursera/Reproducable Research/Week4/plot6.R')
source('D:/Data Science Certification/datasciencecoursera/Reproducable Research/Week4/plot5.R')
MD.onroad <- subset(NEI, fips == "24510" & type == 'ON-ROAD')
MD.df <- aggregate(MD.onroad[, 'Emissions'], by=list(MD.onroad$year), sum)
MD.df$round<-round(MD.df[,2],2)
png("plot5.png",width=1200,height=800,units="px")
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
dev.off()
NEI$year<-factor(NEI$year,levels = c("1999","2002","2005","2008"))
MD.onroad <- subset(NEI, fips == '24510' & type == 'ON-ROAD')
CA.onroad <- subset(NEI, fips == '06037' & type == 'ON-ROAD')
MD.df<-aggregate(MD.onroad[, 'Emissions'], by=list(MD.onroad$year), sum)
CA.df<-aggregate(CA.onroad[, 'Emissions'], by=list(CA.onroad$year), sum)
MD.df$round<-round(MD.df[,2],2)
CA.df$round<-round(CA.df[,2],2)
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
MD.onroad <- subset(NEI, fips == '24510' & type == 'ON-ROAD')
CA.onroad <- subset(NEI, fips == '06037' & type == 'ON-ROAD')
MD.df<-aggregate(MD.onroad[, 'Emissions'], by=list(MD.onroad$year), sum)
CA.df<-aggregate(CA.onroad[, 'Emissions'], by=list(CA.onroad$year), sum)
MD.df$round<-round(MD.df[,2],2)
CA.df$round<-round(CA.df[,2],2)
png("plot6.png",width=1200,height=800,units="px")
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
dev.off()
png("plot6.png",width=1200,height=800,units="px")
qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
dev.off()
png("plot6.png",width=1200,height=800,units="px")
p1<-qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
p2<-qplot(Group.1,round,data=CA.df)+geom_smooth(col="blue")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
grid.arrange(p1,p2,ncol=2)
dev.off()
png("plot6.png",width=1200,height=800,units="px")
p1<-qplot(Group.1,round,data=MD.df)+geom_smooth()+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
p2<-qplot(Group.1,round,data=CA.df)+geom_smooth()+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
grid.arrange(p1,p2,ncol=2)
dev.off()
rm(list=ls())
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
# NEI$year<-factor(NEI$year,levels = c("1999","2002","2005","2008"))
MD.onroad <- subset(NEI, fips == '24510' & type == 'ON-ROAD')
CA.onroad <- subset(NEI, fips == '06037' & type == 'ON-ROAD')
MD.df<-aggregate(MD.onroad[, 'Emissions'], by=list(MD.onroad$year), sum)
CA.df<-aggregate(CA.onroad[, 'Emissions'], by=list(CA.onroad$year), sum)
MD.df$round<-round(MD.df[,2],2)
CA.df$round<-round(CA.df[,2],2)
png("plot6.png",width=1200,height=800,units="px")
p1<-qplot(Group.1,round,data=MD.df)+geom_smooth()+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
p2<-qplot(Group.1,round,data=CA.df)+geom_smooth()+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
grid.arrange(p1,p2,ncol=2)
dev.off()
png("plot6.png",width=1200,height=800,units="px")
p1<-qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
p2<-qplot(Group.1,round,data=CA.df)+geom_smooth(col="magenta")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5]")
grid.arrange(p1,p2,ncol=2)
dev.off()
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
data<-subset(NEI,fips=="24510")
Emissions <- aggregate(data$Emissions, by=list(data$year), FUN=sum)
png("plot2.png")
par(mar=rep(4,4))
b<-barplot(Emissions$x,Emissions$Group.1,col=Emissions$Group.1,main="Total emission of Baltimore city, MD",xlab="YEAR",ylab="PM 2.5 in tons")
dev.off()
png("plot6.png",width=1200,height=800,units="px")
p1<-qplot(Group.1,round,data=MD.df)+geom_smooth(col="red")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5] in BAltimore")
p2<-qplot(Group.1,round,data=CA.df)+geom_smooth(col="magenta")+
xlab("YEAR")+ylab("Emissions in tons")+ggtitle("Total emission of PM[2.5] in Los Angeles")
grid.arrange(p1,p2,ncol=2)
dev.off()
